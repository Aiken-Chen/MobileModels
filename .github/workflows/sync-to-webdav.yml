name: Sync MD Files to WebDAV

on:
  schedule:
    # 每天在北京时间早上 2 点左右自动运行一次 (UTC 18:00)
    - cron: '0 18 * * *'
  workflow_dispatch: # 这个选项允许您手动点击 "Run workflow" 来触发

jobs:
  sync-and-upload:
    runs-on: ubuntu-latest
    steps:
      # 第一步：从 KHwang9883 的原始仓库拉取最新的代码
      - name: Checkout Source Repo
        uses: actions/checkout@v4 # 使用最新的 v4 版本
        with:
          repository: 'KHwang9883/MobileModels' 
          path: 'source_repo'

      # 第二步：使用正确的 webdav-action 工具，将文件上传到您的网盘
      - name: Upload 'brands' folder to WebDAV
        # 核心修正：使用正确的 action 名称和版本号
        uses: n-th/webdav-action@v1.1.0 
        with:
          # 以下信息将从您设置的 Secrets 中安全地读取
          server-address: ${{ secrets.WEBDAV_URL }}
          user: ${{ secrets.WEBDAV_USER }}
          password: ${{ secrets.WEBDAV_PASS }}

          # 要上传的文件夹 (保持默认即可)
          local-path: ./source_repo/brands/

          # !! 非常重要：请将这里的路径修改为您网盘上的目标文件夹 !!
          # 例如: /MyWeb/brands/ 或者 /dav/brands/
          remote-path: 'API/brands/'
